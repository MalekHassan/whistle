<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../styles/reset.css" />
    <link rel="stylesheet" href="../../styles/base.css" />
    <title>Live Matches</title>
  </head>
    <body>
      <header class="row">
        <a href="/"> <h1>Whistle <i class="fas fa-flag-checkered"></i></h1></a>
        <a href="/live">Live matches</a>
        <a href="/sign">Sign in/up</a>
      </header>
   <div class="container-question column">
     <form id="quies-form" class="column" action="" method="POST">
    <% questions.forEach((item , index) =>{ %>
      <div class="question column">
        <h3> <%= item.question %></h3>
        <p hidden><%=item.correct_answer%></p>
        <div class="choises row">
          <div class="option column">
            <div class="row  form_content">
              <input id="answer1" name="<%=index%>" type="radio" value="<%=item.answers[0]%>">
              <label for="answer1"><%=item.answers[0]%></label>
            </div>
            <div class="row  form_content">
              <input  id="answer2" name="<%=index%>" type="radio" value="<%=item.answers[1]%>">
              <label for="answer2"><%=item.answers[1]%></label>
            </div>    
          </div>

          <div class="option column">
            <div class="row  form_content">
              <input  id="answer3" name="<%=index%>" type="radio" value="<%=item.answers[2]%>">
              <label for="answer3"><%=item.answers[2]%></label>
            </div>
            <div class="row  form_content">
              <input  id="answer4" name="<%=index%>" type="radio" value="<%=item.answers[3]%>">
              <label for="answer4"><%=item.answers[3]%></label>
            </div>    
          </div>
        </div>
      </div>
      <% }) %>
      <input type="submit" value="submit">
    </form>
   </div>
   <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
   <script>
     $('#quies-form').submit((event)=>{
      event.preventDefault();
      let userAnswerArray =$('input:radio')
      var checkedAnswer = userAnswerArray.toArray().filter(item =>{
        if(item.checked){
          return item;
        }
      });
      // console.log(checkedAnswer);
      let correct = $('p').toArray().map((item)=>{
        return item.textContent;
      });
      // console.log(correct);
      let counter = 0;
      let asnwers = checkedAnswer.map((item)=>{
        return item.attributes.value.textContent;
      })
      correct.forEach((item,index)=>{
        if (item===asnwers[index]){
          counter++;
        }
      })
      console.log(counter);
    })
   </script>
  </body>
</html>

